#!/usr/bin/make -f
include /usr/share/cdbs/1/rules/debhelper.mk
include /usr/share/cdbs/1/class/makefile.mk
include /usr/share/cdbs/1/class/ocaml.mk
include /usr/share/cdbs/1/rules/dpatch.mk

PKGNAME = libcudf-ocaml-dev
DESTDIR := $(CURDIR)/debian/tmp
DOCDIR = $(CURDIR)/debian/doc/html
OCAML_OCAMLDOC_PACKAGES = $(OCAML_LIBDEV_PACKAGES)

OBFLAGS = -classic-display -no-hygiene
DEB_MAKE_BUILD_TARGET = all
ifeq ($(OCAML_HAVE_OCAMLOPT),yes)
DEB_MAKE_BUILD_TARGET += opt
else
DEB_DH_GENCONTROL_ARGS += -VF:OCamlInterpDepends="ocaml-base-nox-$(OCAML_ABI), libpcre-ocaml"
OBFLAGS += -byte-plugin
endif
DEB_MAKE_BUILD_TARGET += c-lib
DEB_MAKE_BUILD_TARGET += OBFLAGS="$(OBFLAGS)"
DEB_MAKE_INSTALL_TARGET = install DESTDIR=$(DESTDIR)
DEB_MAKE_CHECK_TARGET = test OBFLAGS="$(OBFLAGS)"
